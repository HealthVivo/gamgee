language: cpp

env:
  global: 
    - secure: "gFJsmma5duxLv+bcn5Qvq6M9r3w0XZZ/GVlolSX3t3rlyqyGwEiN71F7+8Rtv+pzgUaMELKuA8JO+x6ZpOCnMCa/RB/TV6KJrZ31UPfV7BJjt6QzWWPMlkT+3i+pM3PUVoN1zTojz+SE9pMhyILeIx+23S/8mHGXmmIW1Es001I="

compiler: 
  - clang
  - gcc

before_install:
  - sudo add-apt-repository -y ppa:boost-latest/ppa
  - sudo add-apt-repository -y ppa:h-rayflood/llvm
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get -qq update;

install:
  - if [ "$CXX" == "g++" ]; then TOOLSET=gcc; sh .travis_scripts/gcc.sh; fi
  - if [ "$CXX" == "clang++" ]; then TOOLSET=clang; fi
  - if [ "$CXX" == "clang++" ]; then sudo apt-get install --allow-unauthenticated -qq clang-3.4 libstdc++-4.8-dev; fi
  - if [ "$CXX" == "clang++" ]; then sudo update-alternatives --install /usr/local/bin/clang++ clang++ /usr/bin/clang++-3.4 50; fi
  - sudo apt-get install -qq boost1.55 
  - git clone https://github.com/boostorg/build.git ${HOME}/boost-build
  - cd ${HOME}/boost-build && ./bootstrap.sh && sudo ./b2 install && cd -

script:
  - b2 -a toolset=$TOOLSET test

after_success:
  - if [ "$CXX" == "clang++" ] && [ "$TRAVIS_BRANCH" == "master" ]; then sh .travis_scripts/update_website_dox.sh ${GH_TOKEN} ${TRAVIS_BUILD_NUMBER}; fi
